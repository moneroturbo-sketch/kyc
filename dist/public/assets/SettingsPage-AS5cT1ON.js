import{c as z,d as Ce,u as Fe,g as Se,r as a,a as V,j as e,S as Pe,f as c,m as ce}from"./index-DVfgMWEj.js";import{u}from"./useMutation-C3JFyC0q.js";import{L as Ae}from"./Layout-DQF0PUvo.js";import{C as h,b as p,c as g,a as f,d as k}from"./card-MvFnLkI3.js";import{B as d}from"./button-CGxMIv-i.js";import{I as x}from"./input-DAqZUuE3.js";import{L as m}from"./label-C9xXS7C4.js";import{B as me}from"./badge-BWq5CaQ8.js";import{D as C,d as M,a as F,b as S,c as P}from"./dialog-BNZCZsQ1.js";import{S as Te,a as De,b as Ee,c as qe,d as H}from"./select-CtMrBPJz.js";import{S as Oe}from"./scroll-area-D6ed3RH1.js";import{u as Re}from"./useTranslation-BN2bxvhs.js";import{U as Ve}from"./Combination-CBNXuibq.js";import{C as J}from"./circle-check-big-Db2aCeqG.js";import{C as ue}from"./circle-alert-DmbVdH5m.js";import{S as xe}from"./shield-DY8F3r7s.js";import{C as Me}from"./copy-p7aQainn.js";import{K as he}from"./key-DfbJPjsT.js";import{F as Ie}from"./file-text-DQ_Hn7jD.js";import{S as Ke}from"./star-sS0e8QqN.js";import"./ThemeToggle-CyhmGA1f.js";import"./shopping-cart-ZI5bkI0I.js";import"./triangle-alert-B4uU5ruW.js";import"./index-BdQq_4o_.js";import"./index-DtGoIGZR.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],G=z("camera",Be);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],$e=z("smartphone",Ue);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_e=z("upload",Le);function fs(){const{t}=Re(),{toast:n}=Ce(),A=Fe(),l=Se(),[pe,W]=a.useState(!1),[I,X]=a.useState(""),[ge,Z]=a.useState(!1),[K,ee]=a.useState(""),[T,se]=a.useState(""),[B,te]=a.useState(""),[fe,je]=a.useState(!1),[U,re]=a.useState(""),[ye,D]=a.useState(!1),[ae,be]=a.useState("passport"),[E,ne]=a.useState(""),[j,ie]=a.useState(null),[y,de]=a.useState(null),q=a.useRef(null),O=a.useRef(null),R=a.useRef(null),[Qe,oe]=a.useState(null),{data:o,isLoading:Ne}=V({queryKey:["me"],queryFn:async()=>(await c("/api/auth/me")).json()}),{data:b}=V({queryKey:["kyc-status"],queryFn:async()=>(await c("/api/kyc/status")).json()}),{data:i}=V({queryKey:["user-trades",l?.id],queryFn:async()=>{if(!l?.id)return null;const s=await c(`/api/users/${l.id}/trades`);if(!s.ok)throw new Error("Failed to fetch trades");return s.json()},enabled:!!l?.id}),{data:we}=V({queryKey:["user-profile",l?.id],queryFn:async()=>{if(!l?.id)return null;const s=await c(`/api/users/${l.id}/profile`);if(!s.ok)throw new Error("Failed to fetch profile");return s.json()},enabled:!!l?.id}),N=u({mutationFn:async()=>{const s=await c("/api/auth/2fa/setup",{method:"POST"});if(!s.ok)throw new Error("Failed to setup 2FA");return s.json()}}),$=u({mutationFn:async s=>{const r=await c("/api/auth/2fa/enable",{method:"POST",body:JSON.stringify({token:s})});if(!r.ok)throw new Error("Invalid token");return r.json()},onSuccess:()=>{A.invalidateQueries({queryKey:["me"]}),W(!1),X(""),n({title:"2FA Enabled",description:"Your account is now more secure"})},onError:()=>{n({variant:"destructive",title:"Invalid code",description:"Please try again"})}}),L=u({mutationFn:async s=>{const r=await c("/api/auth/2fa/disable",{method:"POST",body:JSON.stringify({token:s})});if(!r.ok)throw new Error("Invalid token");return r.json()},onSuccess:()=>{A.invalidateQueries({queryKey:["me"]}),n({title:"2FA Disabled"})},onError:()=>{n({variant:"destructive",title:"Invalid code"})}}),_=u({mutationFn:async()=>{if(T!==B)throw new Error("Passwords do not match");const s=await c("/api/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:K,newPassword:T})});if(!s.ok){const r=await s.json();throw new Error(r.message)}return s.json()},onSuccess:()=>{Z(!1),ee(""),se(""),te(""),n({title:"Success",description:"Password changed successfully"})},onError:s=>{n({variant:"destructive",title:"Error",description:s.message})}}),Q=u({mutationFn:async()=>{const s=await c("/api/auth/request-2fa-reset",{method:"POST"});if(!s.ok){const r=await s.json();throw new Error(r.message)}return s.json()},onSuccess:()=>{n({title:"Email Sent",description:"Check your email for the 2FA reset code"})},onError:s=>{n({variant:"destructive",title:"Error",description:s.message})}}),le=u({mutationFn:async s=>{const r=new FormData;r.append("profilePicture",s);const w=ce(),v=await fetch("/api/users/profile-picture",{method:"POST",headers:{Authorization:`Bearer ${w}`},body:r});if(!v.ok){const ke=await v.json();throw new Error(ke.message||"Failed to upload profile picture")}return v.json()},onSuccess:()=>{A.invalidateQueries({queryKey:["me"]}),oe(null),R.current&&(R.current.value=""),n({title:"Profile Picture Updated",description:"Your profile picture has been updated"})},onError:s=>{n({variant:"destructive",title:"Upload Failed",description:s.message})}}),ve=s=>{const r=s.target.files?.[0];r&&(oe(r),le.mutate(r))},Y=u({mutationFn:async()=>{if(!j||!y||!E)throw new Error("Please fill in all required fields");const s=new FormData;s.append("idType",ae),s.append("idNumber",E),s.append("idDocument",j),s.append("selfie",y);const r=ce(),w=await fetch("/api/kyc/submit",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:s});if(!w.ok){const v=await w.json();throw new Error(v.message||"Failed to submit KYC")}return w.json()},onSuccess:()=>{A.invalidateQueries({queryKey:["kyc-status"]}),D(!1),ne(""),ie(null),de(null),q.current&&(q.current.value=""),O.current&&(O.current.value=""),n({title:"KYC Submitted",description:"Your documents are being reviewed"})},onError:s=>{n({variant:"destructive",title:"Submission Failed",description:s.message})}});return e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-3xl mx-auto px-2 sm:px-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground truncate",children:t("settings.title")}),e.jsxs(h,{children:[e.jsx(p,{children:e.jsxs(g,{className:"text-foreground flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),t("settings.account")]})}),e.jsx(f,{className:"space-y-4",children:Ne?e.jsx(Pe,{className:"h-32"}):e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:R,accept:"image/*",className:"hidden",onChange:ve}),e.jsxs("div",{onClick:()=>R.current?.click(),className:"cursor-pointer group relative","data-testid":"upload-profile-picture",children:[o?.profilePicture?e.jsx("img",{src:o.profilePicture,alt:o.username,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary to-primary/60 rounded-full flex items-center justify-center text-primary-foreground text-2xl font-bold",children:o?.username?.[0]?.toUpperCase()}),e.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(G,{className:"h-6 w-6 text-white"})}),le.isPending&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-white border-t-transparent rounded-full"})})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-foreground font-medium text-lg",children:o?.username}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("common.edit")}),e.jsx(me,{className:"mt-2",children:o?.role})]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:t("auth.email")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-foreground font-medium",children:o?.email}),o?.emailVerified?e.jsx(J,{className:"h-4 w-4 text-green-500"}):e.jsx(ue,{className:"h-4 w-4 text-yellow-500"})]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:t("common.confirm")}),e.jsx("p",{className:"text-foreground font-medium",children:new Date(o?.createdAt).toLocaleDateString()})]})]})})]}),e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"text-foreground flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),t("settings.security")]}),e.jsx(k,{children:t("settings.twoFactor")})]}),e.jsx(f,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx($e,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:t("twoFactor.title")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("twoFactor.description")})]})]}),o?.twoFactorEnabled?e.jsx(me,{className:"bg-green-600",children:t("twoFactor.enabled")}):e.jsxs(C,{open:pe,onOpenChange:W,children:[e.jsx(M,{asChild:!0,children:e.jsx(d,{className:"bg-primary hover:bg-primary/90",onClick:()=>N.mutate(),"data-testid":"button-setup-2fa",children:t("twoFactor.enable")})}),e.jsxs(F,{className:"max-w-md",children:[e.jsx(S,{children:e.jsx(P,{className:"text-foreground",children:t("twoFactor.setup")})}),N.data?e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:t("twoFactor.scanQR")}),e.jsx("div",{className:"flex justify-center p-4 bg-white rounded-lg",children:e.jsx("img",{src:N.data.qrCode,alt:"QR Code",className:"w-48 h-48"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-foreground",children:t("twoFactor.enterManually")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{readOnly:!0,value:N.data.secret,className:"bg-muted border-border font-mono text-sm"}),e.jsx(d,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(N.data.secret),n({title:"Copied!"})},children:e.jsx(Me,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-foreground",children:t("twoFactor.verificationCode")}),e.jsx(x,{placeholder:"000000",maxLength:6,className:"bg-muted border-border text-center text-lg tracking-widest",value:I,onChange:s=>X(s.target.value),"data-testid":"input-2fa-verify"})]}),e.jsx(d,{className:"w-full bg-green-600 hover:bg-green-700",disabled:I.length!==6||$.isPending,onClick:()=>$.mutate(I),"data-testid":"button-verify-2fa",children:$.isPending?t("twoFactor.verifying"):t("twoFactor.verify")})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-4",children:t("twoFactor.setuping")})]})]})]})]})})]}),e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"text-foreground flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Password Management"]}),e.jsx(k,{children:"Change your password and secure your account"})]}),e.jsx(f,{className:"space-y-4",children:e.jsxs(C,{open:ge,onOpenChange:Z,children:[e.jsx(M,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"Change Password"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Update your account password regularly for security"})]}),e.jsx(d,{className:"bg-primary hover:bg-primary/90","data-testid":"button-change-password",children:"Change Password"})]})}),e.jsxs(F,{className:"max-w-md",children:[e.jsx(S,{children:e.jsx(P,{className:"text-foreground",children:"Change Password"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"current-password",className:"text-foreground",children:"Current Password"}),e.jsx(x,{id:"current-password",type:"password",placeholder:"Enter current password",className:"bg-muted border-border",value:K,onChange:s=>ee(s.target.value),"data-testid":"input-current-password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"new-password",className:"text-foreground",children:"New Password"}),e.jsx(x,{id:"new-password",type:"password",placeholder:"Enter new password",className:"bg-muted border-border",value:T,onChange:s=>se(s.target.value),"data-testid":"input-new-password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"confirm-password",className:"text-foreground",children:"Confirm Password"}),e.jsx(x,{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"bg-muted border-border",value:B,onChange:s=>te(s.target.value),"data-testid":"input-confirm-password"})]}),e.jsx(d,{className:"w-full bg-green-600 hover:bg-green-700",disabled:!K||!T||!B||_.isPending,onClick:()=>_.mutate(),"data-testid":"button-confirm-password-change",children:_.isPending?"Changing...":"Change Password"})]})]})]})})]}),o?.twoFactorEnabled&&e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"text-foreground flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),"2FA Management"]}),e.jsx(k,{children:"Reset or disable your two-factor authentication"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"Reset Authenticator"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Request a code via email to reset your 2FA authenticator"})]}),e.jsxs(C,{open:fe,onOpenChange:je,children:[e.jsx(M,{asChild:!0,children:e.jsx(d,{className:"bg-orange-600 hover:bg-orange-700","data-testid":"button-reset-2fa",children:"Reset 2FA"})}),e.jsxs(F,{className:"max-w-md",children:[e.jsx(S,{children:e.jsx(P,{className:"text-foreground",children:"Reset 2FA Authenticator"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"A reset code will be sent to your email address. Use it to set up a new authenticator."}),e.jsx(d,{className:"w-full bg-orange-600 hover:bg-orange-700",disabled:Q.isPending,onClick:()=>Q.mutate(),"data-testid":"button-request-2fa-reset",children:Q.isPending?"Sending...":"Send Reset Code"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:"Disable 2FA"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Temporarily disable two-factor authentication"})]}),e.jsxs(C,{children:[e.jsx(M,{asChild:!0,children:e.jsx(d,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500/10","data-testid":"button-disable-2fa",children:"Disable 2FA"})}),e.jsxs(F,{className:"max-w-md",children:[e.jsx(S,{children:e.jsx(P,{className:"text-foreground",children:"Disable 2FA"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your authenticator code to disable two-factor authentication."}),e.jsx(x,{type:"text",placeholder:"000000",maxLength:6,className:"bg-muted border-border text-center text-lg tracking-widest",value:U,onChange:s=>re(s.target.value.replace(/\D/g,"").slice(0,6)),"data-testid":"input-disable-2fa-code"}),e.jsx(d,{className:"w-full bg-red-600 hover:bg-red-700",disabled:U.length!==6||L.isPending,onClick:()=>{L.mutate(U),re("")},"data-testid":"button-confirm-disable-2fa",children:L.isPending?"Disabling...":"Disable 2FA"})]})]})]})]})]})]}),l?.role!=="admin"&&l?.role!=="dispute_admin"&&e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"text-foreground flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),t("kyc.title")]}),e.jsx(k,{children:t("kyc.description")})]}),e.jsx(f,{children:e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[b?.status==="approved"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:t("kyc.verified")}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[t("kyc.tier"),": ",b.tier]})]})]}):b?.status==="pending"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-yellow-500 border-t-transparent rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:t("kyc.pending")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("kyc.pendingDesc")})]})]}):b?.status==="rejected"?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"h-6 w-6 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:t("kyc.rejected")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:b.rejectionReason||t("common.cancel")})]})]}),e.jsx(d,{className:"bg-primary hover:bg-primary/90",onClick:()=>D(!0),"data-testid":"button-resubmit-kyc",children:t("kyc.resubmit")})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:t("kyc.notVerified")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("kyc.completeKyc")})]}),e.jsx(d,{className:"bg-primary hover:bg-primary/90",onClick:()=>D(!0),"data-testid":"button-start-kyc",children:t("kyc.startVerification")})]}),e.jsx(C,{open:ye,onOpenChange:D,children:e.jsxs(F,{className:"max-w-md max-h-[90vh]",children:[e.jsx(S,{children:e.jsx(P,{className:"text-foreground",children:t("kyc.kycVerification")})}),e.jsx(Oe,{className:"max-h-[70vh] pr-4",children:e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-foreground",children:t("kyc.idType")}),e.jsxs(Te,{value:ae,onValueChange:be,children:[e.jsx(De,{className:"bg-muted border-border","data-testid":"select-id-type",children:e.jsx(Ee,{})}),e.jsxs(qe,{children:[e.jsx(H,{value:"passport",children:t("kyc.passport")}),e.jsx(H,{value:"national_id",children:t("kyc.nationalId")}),e.jsx(H,{value:"drivers_license",children:t("kyc.driversLicense")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-foreground",children:t("kyc.idNumber")}),e.jsx(x,{placeholder:t("kyc.enterIdNumber"),value:E,onChange:s=>ne(s.target.value),className:"bg-muted border-border","data-testid":"input-id-number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-foreground",children:t("kyc.idDocument")}),e.jsx("input",{type:"file",ref:q,accept:"image/*,.pdf",className:"hidden",onChange:s=>ie(s.target.files?.[0]||null)}),e.jsx("div",{onClick:()=>q.current?.click(),className:"border-2 border-dashed border-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors","data-testid":"upload-id-document",children:j?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-500",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("span",{children:j.name})]}):e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(_e,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Click to upload ID document"}),e.jsx("p",{className:"text-xs",children:"JPG, PNG or PDF (max 5MB)"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-foreground",children:"Selfie with ID"}),e.jsx("input",{type:"file",ref:O,accept:"image/*",className:"hidden",onChange:s=>de(s.target.files?.[0]||null)}),e.jsx("div",{onClick:()=>O.current?.click(),className:"border-2 border-dashed border-border rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors","data-testid":"upload-selfie",children:y?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-500",children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{children:y.name})]}):e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(G,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Click to upload selfie holding your ID"}),e.jsx("p",{className:"text-xs",children:"JPG or PNG (max 5MB)"})]})})]}),e.jsx(d,{className:"w-full bg-primary hover:bg-primary/90",disabled:!j||!y||!E||Y.isPending,onClick:()=>Y.mutate(),"data-testid":"button-submit-kyc",children:Y.isPending?"Submitting...":"Submit Verification"})]})})]})})]})})]}),i&&e.jsxs(h,{className:"bg-card border-border border-yellow-200 bg-yellow-50/20",children:[e.jsxs(p,{children:[e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ke,{className:"h-5 w-5 text-yellow-600"}),"Verified Badge Application"]}),e.jsx(k,{children:"Unlock the verified badge for increased trust and visibility"})]}),e.jsx(f,{className:"space-y-4",children:we?.hasVerifyBadge?e.jsxs("div",{className:"text-center py-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(J,{className:"h-6 w-6 text-green-600"}),e.jsx("p",{className:"font-bold text-green-700",children:"You have the Verified Badge! ðŸŽ‰"})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Your badge appears next to your name on your profile"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Requirements to qualify:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${i.totalTrades>=10?"bg-green-100/30 border border-green-200":"bg-gray-100/30 border border-gray-200"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${i.totalTrades>=10?"bg-green-600 text-white":"border-2 border-gray-400 text-gray-400"}`,children:i.totalTrades>=10?"âœ“":""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:i.totalTrades>=10?"text-green-700 font-medium":"text-muted-foreground",children:"More than 10 trades"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: ",i.totalTrades," trades"]})]})]}),e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${parseFloat(i.totalTradeVolume||"0")>700?"bg-green-100/30 border border-green-200":"bg-gray-100/30 border border-gray-200"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${parseFloat(i.totalTradeVolume||"0")>700?"bg-green-600 text-white":"border-2 border-gray-400 text-gray-400"}`,children:parseFloat(i.totalTradeVolume||"0")>700?"âœ“":""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:parseFloat(i.totalTradeVolume||"0")>700?"text-green-700 font-medium":"text-muted-foreground",children:"Trade volume above 700 USDT"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: $",i.totalTradeVolume||"0"]})]})]})]})]}),e.jsx(d,{disabled:i.totalTrades<10||parseFloat(i.totalTradeVolume||"0")<=700,className:"w-full bg-yellow-600 hover:bg-yellow-700","data-testid":"button-apply-verify-badge",onClick:()=>{console.log("Applying for verify badge"),n({title:"Application submitted",description:"Admin will review and approve your application soon"})},children:"Apply for Verified Badge"}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Admin approval required â€¢ Badge appears next to your username once approved"})]})})]})]})})}export{fs as default};
